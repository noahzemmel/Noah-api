# Dockerfile.streamlit (UI service)
FROM python:3.11-slim

RUN apt-get update && apt-get install -y --no-install-recommends \
    curl ca-certificates && \
    rm -rf /var/lib/apt/lists/*

WORKDIR /app

COPY requirements.txt .
RUN pip install --no-cache-dir streamlit==1.36.0 requests python-dotenv

COPY app.py ./

ENV PORT=8501
# Disable CORS so the API can be called cross-origin (we control CORS on the API)
CMD exec streamlit run app.py --server.port ${PORT} --server.address 0.0.0.0 --server.enableCORS false --browser.gatherUsageStats false